function render(items){
  const list = document.getElementById('oerList');
  const empty = document.getElementById('emptyState');
  const err = document.getElementById('errorState');
  list.innerHTML = '';
  document.getElementById('resultCount').textContent = items.length;
  if (err) err.classList.add('d-none');

  if (!items.length){
    empty.classList.remove('d-none');
    return;
  }
  empty.classList.add('d-none');

  items.forEach(o=>{
    // Use your existing fields; fallbacks avoid blanks but don't change your data
    const title = o.title || o.name || 'Untitled';
    const img   = o.image || o.thumbnail || 'assets/img/models/_placeholder.png';
    const authors = Array.isArray(o.authors) ? o.authors
                    : (o.authors ? String(o.authors).split(/,\s*/) : []);
    const who   = authors.length ? authors.join(', ') : (o.provider || o.publisher || '');
    const year  = (o.year!=null && o.year!=='') ? o.year : '';
    const meta  = [who || null, year || null].filter(Boolean).join(' • ');
    const topics = (Array.isArray(o.topics) ? o.topics : (o.topics ? [o.topics] : []));
    const langs  = (Array.isArray(o.language) ? o.language : (o.language ? [o.language] : []));
    const media  = (Array.isArray(o.media) ? o.media : (o.media ? [o.media] : []));
    const license = o.license || '';
    const licenseUrl = o.license_url && /^https?:/.test(o.license_url) ? o.license_url : '';
    const sourceUrl  = o.source && /^https?:/.test(o.source) ? o.source : (o.url && /^https?:/.test(o.url) ? o.url : '');
    const addedTxt = o.added_date_fmt ? `Added ${o.added_date_fmt}` : (o.added ? `Added ${o.added}` : '');

    const el = document.createElement('div');
    el.className = 'paper-card';
    el.innerHTML = `
      <div class="d-flex gap-3 align-items-start">
        <div class="left position-relative">
          <img src="${img}" alt="${title.replaceAll('"','&quot;')}"
               onerror="this.onerror=null; this.src='assets/img/models/_placeholder.png'">
          ${o.contributor || o.contributor_url ? `
            <div class="submitted-by">
              <a href="${o.contributor_url || '#'}" target="_blank" rel="noopener">
                Submitted by <strong>${o.contributor?.startsWith('@') ? o.contributor : '@' + o.contributor}</strong>
              </a>
            </div>` : ``}
        </div>

        <div class="flex-grow-1">
          <div class="pc-head">
            <h3 class="pc-title">
              ${sourceUrl ? `<a href="${sourceUrl}" target="_blank" rel="noopener">${title.replaceAll('<','&lt;')}</a>` : title.replaceAll('<','&lt;')}
            </h3>
            <div class="pc-meta">${meta || '—'}</div>
          </div>

          <div class="hr-ghost"></div>

          <div class="tag-row" aria-label="Resource tags">
            ${topics.map(t=>`<span class="badge-topic">${String(t)}</span>`).join('')}
            ${media .map(m=>`<span class="badge-media">${String(m)}</span>`).join('')}
            ${langs .map(l=>`<span class="badge-lang">${String(l)}</span>`).join('')}
            ${license ? `<span class="badge-license">${license}</span>` : ``}
          </div>

          <div class="pc-foot mt-2">
            ${sourceUrl ? `<a class="btn btn-sm btn-primary" href="${sourceUrl}" target="_blank" rel="noopener">View resource</a>` : ``}
            ${licenseUrl ? `<a class="btn btn-sm btn-outline-secondary" href="${licenseUrl}" target="_blank" rel="noopener">License</a>` : ``}
            ${addedTxt ? `<span class="added-note">${addedTxt}</span>` : ``}
          </div>
        </div>
      </div>`;
    list.appendChild(el);
  });
}
