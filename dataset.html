<!DOCTYPE html> 
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>OpenConstruction · Datasets</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    /* ---------- Design tokens (LIGHT ONLY) ---------- */
    :root{
      --oc-bg:#fff; --oc-text:#1e2a36; --oc-sub:#6b7b8c;
      --oc-border:#e7edf3; --oc-ink:#0f2e4b; --oc-link:#0b66c3;
      --oc-card:#fff; --oc-shadow:0 8px 24px rgba(15,46,75,.06);
      --oc-radius:14px; --oc-muted:#f6f9fc;
      --oc-brand:#0f2e4b; --oc-accent:#f2a238;
    }
    html,body{background:var(--oc-bg); color:var(--oc-text)}
    a{color:var(--oc-link)}

    /* ---------- Navbar ---------- */
    .oc-nav{backdrop-filter:saturate(120%) blur(6px)}
    .brand-wordmark{display:inline-flex;gap:.25rem;align-items:baseline;color:#0F2E4B;font-weight:700;letter-spacing:.1px;font-size:clamp(1.1rem,1.1rem + .4vw,1.35rem)}
    .brand-wordmark .oc-open{font-weight:600;opacity:.95}
    .brand-wordmark .oc-sep{opacity:.35;margin:0 .15rem}
    .brand-wordmark .oc-construction{font-weight:800;letter-spacing:.15px}
    .oc-logo{height:44px;width:44px}

    /* Clean, professional nav links (bold, no background/outline) */
    .navbar .nav-link.plain{
      font-weight:700;
      color:var(--oc-text);
      padding:.5rem .6rem;
    }
    .navbar .nav-link.plain:hover{
      color:var(--oc-ink);
      text-decoration:underline;
      text-underline-offset:3px;
    }
    .navbar .nav-link.plain.active{
      color:var(--oc-ink);
      text-decoration:underline;
      text-underline-offset:3px;
    }
	
	.hl{
      background:linear-gradient(180deg, transparent 60%, rgba(242,162,56,.25) 0);
      padding:0 .06em;
      font-weight:700;
    }

    .oc-btn{border-radius:999px;border-color:#d6dde6;color:#24384d}
    .oc-btn:hover{background:#f4f7fb;border-color:#cbd6e3;color:#0f2e4b}
    .oc-cta{border-radius:999px;box-shadow:0 4px 10px rgba(16,185,129,.15)}
    .oc-cta:hover{box-shadow:0 6px 14px rgba(16,185,129,.22);transform:translateY(-1px)}

    /* Minimal icon-only link (GitHub) */
    .nav-link.icon-only{line-height:1; padding-top:.375rem; padding-bottom:.375rem;}
    .nav-link.icon-only svg{display:block; width:20px; height:20px; color:inherit; opacity:.9}
    .nav-link.icon-only:hover svg{opacity:1}

    /* ---------- Docked search (TOP bar only; smaller) ---------- */
    .navbar-search{
      display:none;
      width: clamp(200px, 24vw, 320px);
    }
    .navbar-search .form-control{
      height:34px;
      padding:.25rem .75rem;
      font-size:.875rem;
      line-height:1.2;
      border-radius:999px;
    }
    body.docked .navbar-search{display:flex; flex:0 0 auto}
    body.docked #searchDock{display:none}
    @media (min-width: 992px){
      .navbar .container{display:flex; align-items:center}
      .navbar .navbar-collapse{flex-grow:0}
      .navbar .navbar-search{margin-left:.75rem}
    }

    /* ---------- Hero (center search UNCHANGED) ---------- */
    header.hero{
      border-bottom:1px solid var(--oc-border);
      background:#fff;
    }
    header.hero .content{ padding:56px 0 36px; text-align:center }
    header.hero h1{ font-weight:800; color:var(--oc-brand); margin-bottom:.3rem }
    header.hero p{ color:var(--oc-sub); margin:0 auto; max-width:72ch }
    /* original big search size */
    .search-input{border-radius:999px; padding:.9rem 1.1rem; max-width:720px; margin:0 auto; box-shadow:inset 0 1px 0 rgba(15,46,75,.05)}

    /* ---------- Filters card ---------- */
    .filters{ position:sticky; top:86px; }
    .facet-list{ max-height: 280px; overflow:auto; border:1px solid var(--oc-border); border-radius:.5rem; padding:.55rem; background:var(--oc-card) }
    .facet-list .form-check{ margin-bottom:.25rem }
    .card .form-label{ font-weight:700 }
    .facet-toggle{ font-size:.875rem; line-height:1.2 }

    /* ---------- Year dual range with selected track ---------- */
    .range-container{ position:relative; height:36px; margin:.25rem 0 .5rem }
    .range-container .slider{ position:absolute; left:10px; right:10px; top:14px; height:8px; background:#e9ecef; border-radius:10px }
    .range-container .range-selected{ position:absolute; top:14px; height:8px; background:#0d6efd; border-radius:10px }
    .range-container .thumb{ pointer-events:none; position:absolute; height:0; width:100%; -webkit-appearance:none }
    .range-container .thumb::-webkit-slider-thumb{
      pointer-events:all; width:18px; height:18px; border-radius:50%; background:#0d6efd; border:2px solid #fff; box-shadow:0 0 0 1px rgba(0,0,0,.12); -webkit-appearance:none
    }
    .range-container .thumb::-moz-range-thumb{
      pointer-events:all; width:18px; height:18px; border-radius:50%; background:#0d6efd; border:2px solid #fff
    }

    /* ---------- Result toolbar ---------- */
    .toolbar{ display:flex; justify-content:space-between; align-items:center; gap:.75rem; flex-wrap:wrap }

    /* ---------- Dataset cards ---------- */
    .dataset-card{ background:var(--oc-card); border:1px solid var(--oc-border); border-radius:var(--oc-radius); box-shadow:var(--oc-shadow); height:100% }
    .dataset-card .card-body{ padding:1rem 1rem }
    .dataset-card .title{ font-weight:700; color:var(--oc-ink); margin-bottom:.15rem }
    .dataset-card .meta{ font-size:.85rem; color:var(--oc-sub) }
    .badge-soft{ background:var(--oc-muted); border:1px solid var(--oc-border); color:var(--oc-text); font-weight:600 }

    /* ---------- Empty state & skeleton ---------- */
    .empty{ border:1px dashed var(--oc-border); border-radius:12px; padding:24px; text-align:center; color:var(--oc-sub) }
    .skeleton{ position:relative; overflow:hidden; background:var(--oc-muted); border-radius:10px; min-height:120px }
    .skeleton::after{ content:""; position:absolute; inset:0; transform:translateX(-100%); background:linear-gradient(90deg,transparent,rgba(255,255,255,.5),transparent); animation:shimmer 1.1s infinite; mix-blend-mode:overlay }
    @keyframes shimmer{ to{ transform:translateX(100%) } }

    /* Hide any legacy class-count spans inside labels */
    #filter-classes .form-check-label .text-muted{ display:none !important }
	
	/* Yellow subscribe bell */
.btn-subscribe-icon{
  background: transparent;
  border: 0;
  padding: .25rem .4rem;
  line-height: 1;
}
.btn-subscribe-icon svg{
  fill: var(--oc-accent); /* use your yellow accent */
}
.btn-subscribe-icon:hover svg{
  filter: brightness(1.15);
}

	
	
  </style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg bg-white border-bottom sticky-top oc-nav">
  <div class="container">
    <a class="navbar-brand d-flex align-items-center gap-2" href="index.html">
      <img src="assets/img/icon.png" alt="OpenConstruction logo" height="44" width="44" class="oc-logo">
      <span class="brand-wordmark"><span class="oc-open">Open</span><span class="oc-sep">·</span><span class="oc-construction">Construction</span></span>
    </a>

    <!-- Docked search (shown when scrolling) -->
    <form class="navbar-search ms-3" role="search" onsubmit="return false;">
      <input id="qDock" type="text" class="form-control oc-search" placeholder="Search datasets, objects, tasks …" aria-label="Search datasets">
    </form>

    <button class="navbar-toggler ms-2" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsExample" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarsExample">
      <ul class="navbar-nav ms-auto align-items-lg-center gap-2">
        <!-- Clean bold links -->
        <li class="nav-item"><a class="nav-link plain" href="index.html">Home</a></li>
		<li class="nav-item"><a class="nav-link plain" href="dataset.html">Datasets</a></li>
        <li class="nav-item"><a class="nav-link plain" href="models.html" aria-current="page">Models</a></li>
		<li class="nav-item"><a class="nav-link plain" href="contributors.html">Community</a></li>

        <!-- GitHub icon-only link -->
        <li class="nav-item">
          <a class="nav-link px-2 icon-only"
             href="https://github.com/ruoxinx/OpenConstruction-Datasets"
             target="_blank" rel="noopener"
             aria-label="OpenConstruction Datasets on GitHub"
             title="View on GitHub">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                 fill="currentColor" viewBox="0 0 16 16" aria-hidden="true" focusable="false">
              <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 
                       2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 
                       0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52
                       0-.53.63-.01 1.08.58 1.23.82.72 1.21 
                       1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 
                       0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 
                       0 0 .67-.21 2.2.82a7.65 7.65 0 0 1 2-.27c.68 0 
                       1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 
                       1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 
                       0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 
                       1.48 0 1.07-.01 1.93-.01 2.19 0 .21.15.46.55.38A8.013 
                       8.013 0 0 0 16 8c0-4.42-3.58-8-8-8"/>
            </svg>
          </a>
        </li>
		<!-- Subscribe bell -->
<li class="nav-item">
<button type="button"
        class="nav-link px-2 icon-only btn-subscribe-icon"
        data-bs-toggle="modal" data-bs-target="#subscribeModal"
        aria-label="Subscribe for updates" title="Subscribe">
  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
       viewBox="0 0 16 16" aria-hidden="true" class="icon-bell">
    <path d="M8 16a2 2 0 0 0 1.985-1.75H6.015A2 2 0 0 0 8 16zm.5-14a.5.5 0 0 
             0-1 0 7 7 0 0 0-5.468 6.37c-.084.58-.272 1.204-.653 1.856-.356.617-.879 1.104-1.379 
             1.357V13h14v-1.417c-.5-.253-1.023-.74-1.379-1.357-.38-.652-.569-1.276-.653-1.856A7 
             7 0 0 0 8.5 2z"/>
  </svg>
</button>

		
		
		
      </ul>
    </div>
  </div>
</nav>

<!-- Hero -->
<header class="hero">
  <div class="container content">
    <h1 class="display-6 fw-bold">OpenConstruction Dataset Catalog</h1>
    <p class="lead">Explore <span class="hl">open datasets</span> for construction research and practice</p>
    <div id="searchDock" class="mt-3">
      <!-- CENTER search (kept original size) -->
      <input id="q" type="text" class="form-control form-control-lg search-input" placeholder="Search datasets, objects, tasks …" aria-label="Search datasets large">
    </div>
  </div>
</header>

<main class="container my-4">
  <div class="row g-3">
    <!-- Filters -->
    <aside class="col-lg-3">
      <div class="card shadow-sm filters">
        <div class="card-header"><strong>Filters</strong></div>
        <div class="card-body small">
          <div class="mb-3">
            <label class="form-label" for="filter-modality">Modalities</label>
            <div id="filter-modality" class="facet-list vstack gap-1"></div>
          </div>

          <div class="mb-3">
            <label class="form-label" for="taskSearch">Tasks</label>
            <input id="taskSearch" type="text" class="form-control form-control-sm mb-2" placeholder="Search for tasks…">
            <div id="filter-task" class="facet-list"></div>
          </div>

          <div class="mb-3">
            <label class="form-label" for="licenseSearch">Licenses</label>
            <input id="licenseSearch" type="text" class="form-control form-control-sm mb-2" placeholder="Search for licenses…">
            <div id="filter-license" class="facet-list"></div>
          </div>

          <div class="mb-3">
            <label class="form-label">Release year</label>
            <div class="range-container">
              <div class="slider"></div>
              <div class="range-selected" id="yearRangeSelected"></div>
              <input type="range" class="thumb" id="yearRangeMin" min="2000" max="2030" step="1">
              <input type="range" class="thumb" id="yearRangeMax" min="2000" max="2030" step="1">
            </div>
            <div class="small text-muted">From <span id="yearRangeMinVal"></span> to <span id="yearRangeMaxVal"></span></div>
          </div>

          <div class="mb-1">
            <label class="form-label" for="classSearch">Object classes</label>
            <input id="classSearch" type="text" class="form-control form-control-sm mb-2" placeholder="Search for classes…">
            <div id="filter-classes" class="facet-list"></div>
            <button class="btn btn-link p-0 facet-toggle" id="toggleClasses" type="button" aria-expanded="false">Show all</button>
          </div>
        </div>
      </div>
    </aside>

    <!-- Results -->
    <section class="col-lg-9">
      <div class="toolbar mb-2">
        <div><span id="resultCount" class="fw-semibold">0</span> datasets</div>
        <div class="d-flex align-items-center gap-2">
          <label for="sortBy" class="me-1 small">Sort by</label>
          <select id="sortBy" class="form-select form-select-sm w-auto">
		  <option value="year-desc">Year ↓</option>
		  <option value="year-asc">Year ↑</option>
		  <option value="added-desc" selected>Added date ↓</option>
		  <option value="added-asc">Added date ↑</option>
		  <option value="name-asc">Name A→Z</option>
		  <option value="images-desc">Images ↓</option>
		  <option value="images-asc">Images ↑</option>
		  <option value="classes-desc">Classes ↓</option>
		  <option value="classes-asc">Classes ↑</option>
          </select>
        </div>
      </div>

      <!-- Grid -->
      <div id="datasetGrid" class="row g-3" aria-live="polite" aria-busy="true">
        <!-- Optional skeleton tiles while loading; your JS can replace/remove -->
        <div class="col-md-6 col-xl-4"><div class="skeleton"></div></div>
        <div class="col-md-6 col-xl-4"><div class="skeleton"></div></div>
        <div class="col-md-6 col-xl-4"><div class="skeleton"></div></div>
      </div>

      <!-- Empty state your JS can toggle -->
      <div id="emptyState" class="empty mt-3 d-none">No datasets match your filters. Try clearing some filters or changing the search.</div>
    </section>
  </div>
</main>

<footer class="border-top py-4 mt-5">
  <div class="container small text-muted">© <span id="yearNow"></span> OpenConstruction</div>
</footer>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://unpkg.com/@supabase/supabase-js@2"></script>
<script src="assets/js/config.js"></script>
<script src="assets/js/app.js"></script>
<script src="assets/js/index.js"></script>

<script>
  // Year + docked search + selected-range bar
  (function(){
    document.getElementById('yearNow').textContent = new Date().getFullYear();

    const heroInput = document.getElementById('q');
    const dockInput = document.getElementById('qDock');
    const dockThreshold = 220;

    function sync(to, from){
      to.value = from.value;
      const ev = new Event('input', {bubbles:true});
      to.dispatchEvent(ev);
    }
    if (dockInput && heroInput){
      dockInput.addEventListener('input', ()=> sync(heroInput, dockInput));
      heroInput.addEventListener('input', ()=> { if (!document.body.classList.contains('docked')) dockInput.value = heroInput.value; });
    }
    window.addEventListener('scroll', ()=>{
      if (window.scrollY > dockThreshold) document.body.classList.add('docked');
      else document.body.classList.remove('docked');
    });

    // Selected track between dual range thumbs
    const min = document.getElementById('yearRangeMin');
    const max = document.getElementById('yearRangeMax');
    const track = document.getElementById('yearRangeSelected');
    const minVal = document.getElementById('yearRangeMinVal');
    const maxVal = document.getElementById('yearRangeMaxVal');

    function updateTrack(){
      const minYear = +min.min, maxYear = +max.max;
      const a = Math.min(+min.value, +max.value);
      const b = Math.max(+min.value, +max.value);
      const left = ((a - minYear) / (maxYear - minYear)) * 100;
      const right = 100 - ((b - minYear) / (maxYear - minYear)) * 100;
      track.style.left = `calc(${left}% + 10px)`;
      track.style.right = `calc(${right}% + 10px)`;
      minVal.textContent = a; maxVal.textContent = b;
    }
    if (min && max && track){ ['input','change'].forEach(e=>{min.addEventListener(e,updateTrack); max.addEventListener(e,updateTrack);}); updateTrack(); }
  })();
</script>

<!-- Auto-active current nav link (adds aria-current + .active) -->
<script>
  (function(){
    var current = location.pathname.split('/').pop() || 'index.html';
    document.querySelectorAll('.navbar .nav-link.plain').forEach(function(a){
      var href = a.getAttribute('href'); if(!href) return;
      var normalized = href.split('#')[0].split('?')[0];
      var isMatch = normalized === current ||
                    (normalized === 'index.html' && (current === '' || current === '/'));
      if(isMatch){
        a.classList.add('active');
        a.setAttribute('aria-current','page');
      }
    });
  })();
</script>

<!-- Optional: visit logger via Supabase -->
<script>
(async function(){
  const PAGE = 'index';
  const hasSB = !!(window.SUPABASE_URL && window.SUPABASE_ANON_KEY && window.supabase?.createClient);
  if(!hasSB){ console.warn('Supabase config missing'); return; }
  const sb = window.supabase.createClient(window.SUPABASE_URL, window.SUPABASE_ANON_KEY);

  async function sha256hex(text){
    const enc = new TextEncoder().encode(text);
    const buf = await crypto.subtle.digest('SHA-256', enc);
    return Array.from(new Uint8Array(buf)).map(b=>b.toString(16).padStart(2,'0')).join('');
  }
  function getVisitorId(){
    const k='oc_visitor_id';
    let v=localStorage.getItem(k);
    if(!v){ v=(crypto.randomUUID?crypto.randomUUID():(Date.now()+'-'+Math.random().toString(36).slice(2))); localStorage.setItem(k,v); }
    return v;
  }
  async function getGeo(){
    try{
      const g=await fetch('https://get.geojs.io/v1/ip/geo.json',{cache:'no-store'}).then(r=>r.json());
      if(g && g.latitude && g.longitude) return { ip:g.ip||null, lat:+g.latitude, lon:+g.longitude, city:g.city||null, region:g.region||null, country:g.country||null };
    }catch(e){}
    return null;
  }

  try{
    const geo=await getGeo();
    const base = geo?.ip ? geo.ip : ('vid:'+getVisitorId());
    const ip_hash=await sha256hex(base);
    const payload={
      page: PAGE, ip_hash,
      city: geo?.city||null, region: geo?.region||null, country: geo?.country||null,
      lat: (geo && typeof geo.lat==='number')?geo.lat:null,
      lon: (geo && typeof geo.lon==='number')?geo.lon:null,
      ua: navigator.userAgent, referrer: document.referrer||null
    };
    const { error } = await sb.from('visits').insert(payload);
    if(error) console.error('insert error', error);
  }catch(e){
    console.error('logger failed', e);
  }
})();
</script>

<!-- Floating button: Add new dataset -->
<a href="https://github.com/ruoxinx/OpenConstruction-Datasets/issues/new?template=new_dataset.yml"
   class="issue-btn" target="_blank" rel="noopener">
   Add New Dataset
</a>

<style>
  .issue-btn {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 1050;
    background: #0d6efd; /* Bootstrap blue */
    color: #fff;
    padding: 12px 20px;
    border-radius: 999px;
    font-weight: 600;
    font-size: .9rem;
    box-shadow: 0 4px 12px rgba(0,0,0,.25);
    text-decoration: none;
    transition: background .2s ease, transform .2s ease;
  }
  .issue-btn:hover {
    background: #0b5ed7;
    transform: translateY(-2px);
    color: #fff;
    text-decoration: none;
  }
</style>


<!-- Subscribe Modal -->
<div class="modal fade" id="subscribeModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" style="max-width: 420px;">
    <div class="modal-content p-3 rounded-3 shadow">
      <div class="d-flex align-items-center justify-content-between mb-2">
        <h6 class="m-0 fw-semibold">Subscribe</h6>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <form action="https://github.us5.list-manage.com/subscribe/post?u=12fa0b9a59e8110ba3a89fc76&amp;id=696e3eb0b3&amp;f_id=006fbeedf0" 
            method="post" target="_blank" novalidate>
        <label for="sub-email" class="form-label small text-muted mb-1">Email</label>
        <input type="email" id="sub-email" name="EMAIL" class="form-control mb-2"
               placeholder="you@university.edu" required>
        <button type="submit" class="btn btn-primary w-100 mt-2">Subscribe</button>
        <div style="position:absolute; left:-5000px" aria-hidden="true">
          <input type="text" name="b_12fa0b9a59e8110ba3a89fc76_696e3eb0b3" tabindex="-1" value="">
        </div>
        <p class="small text-muted mt-2 mb-0">We’ll email only when new datasets or models are added. Unsubscribe anytime.</p>
      </form>
    </div>
  </div>
</div>





</body>
</html>